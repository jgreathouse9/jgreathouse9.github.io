---
title: 'Synthetic Controls in Dense Settings'
date: 2025-01-24
permalink: /posts/2025/01/scdense/
---

Plenty of posts have been done in the last decade on [the synthetic control method](https://doi.org/10.1198/jasa.2009.ap08746) and related approaches; folks from [Microsoft](https://medium.com/data-science-at-microsoft/causal-inference-using-synthetic-controls-d96a890c83a7), [Databricks](https://towardsdatascience.com/how-to-do-causal-inference-using-synthetic-controls-ab435e0228f1), [Uber](https://youtu.be/j5DoJV5S2Ao?si=RWUYFjFEWpvkl8x1), [Amazon](https://towardsdatascience.com/causal-inference-with-synthetic-control-in-python-4a79ee636325), [Netflix](https://netflixtechblog.com/round-2-a-survey-of-causal-inference-applications-at-netflix-fd78328ee0bb), [Gainwell Technologies](https://andrewpwheeler.com/2019/12/06/using-regularization-to-generate-synthetic-controls-and-conformal-prediction-for-significance-tests/), and [else](https://rudrendupaul.medium.com/causal-inference-part-7-synthetic-control-methods-a-powerful-technique-for-inferring-causality-in-3ec5dbe26038)[where](https://henamsingla.medium.com/synthetic-control-method-a-z-d28099c56edb) have gone over it, detailing different aspects of the method. Many (not of course [not all](https://peerunreviewed.blogspot.com/2019/11/a-short-tutorial-on-robust-synthetic.html)) of these go over the standard SCM. Broadly, the original SCM tends to favor, under certain technical conditions, a sparse set of control units being the underlying weights. And while sparsity has plenty of appealing properties, such as our ability to interpret the synthetic control, sometimes this advice simply breaks down because [in some cases](https://ceistorvergata.it/public/files/RFCS/Giannone_illusion4-2.pdf) the sparsity notion is wrong. In other words, most of the coefficeints being 0 is a notion that cannot be defended. So in this post, I demonstrate [the](10.13140/RG.2.2.11670.97609) $\ell_2$ panel data approach, an econometric methodology by [Zhentao Shi](https://zhentaoshi.github.io/) and [Yishu Wang](https://ishwang1.github.io/) which accommodates dense data generation processes, or when the true vector of coefficient is mostly not zero.

> **Note:**  
This post goes over an extended empirical example. To see the simple and fast way to use this method, you can go to [the Python documentation](https://mlsynth.readthedocs.io/en/latest/pda.html#ell-2-relaxation) of this method in my packiage ``mlsynth`` which is both slightly more technical and a lot shorter than I'll be here.

# A Review of Synthetic Controls

Our goal is to estimate the counterfactual, or $y\_{1t}^{0}$. These are the values of an outcome for a treated unit we would see if some intervention was never done. The difficulty however is that we can see units as treated or not, $y_{it}=y_{1t}^{1}d\_{it}+\left(1-d_{it}\right)y_{1t}^{0}$, where out outcomes $y$ are indexed to $t \in \mathbb{N}, \quad i \in \mathbb{N}$ time periods and units respectively. Let $i=1$ be the treated unit and an intervention occur at time point $T_0$ such that $t=\{1, 2 \ldots T_0\}$ corresponds to our pre-treatment periods and $T_0 +1 \ldots T$ be the post-intervention period, where when the target unit is treated when $d=1$ else 0. The synthetic control method proposes to find some convex combination of weights to be applied to our donor pool, $\mathbf{Y}_0$, such that the weights approximate the observed trajectory of the treated unit before the intervention took place. In theory, if we ahve good pre-treatment fit, our out-of-sample predictions, or our counterfactual, will also approximate the counterfactual well.


