---
title: "Counterfactual Estimation via ```mlsynth```"
author: "Jared Greathouse"
date: today
format: revealjs
theme: simple
highlight-style: github
---

## Counterfactual Estimation {.scrollable}

- Much of what economists do is predicated on interventions affecting some set of outcomes. Whether we're in business or government, maximizing value for business services and crafting effective public policy depends on knowing whether policies, promotions, new web features, or other interventions affect some metric that we care about in an appreciable, real way.

- Policymakers, economists, and marketers commonly use Difference-in-Differences designs and Synthetic Control Methods (DID and SCM) to measure causal impacts, methods which are widely available in statistical softwares like R, Stata, and Python.

- Both approaches in principle use weighted averages of control groups in the pre-treatment period to predict post-intervention counterfactuals, or the values of the outcome we'd see absent the treatment.

---

## Counterfactual Estimation cont.

However, they may struggle sometimes.

- SCM struggles with high-dimensional datasets. Often, smaller donor pools are preferable to very large ones to mitigate overfitting. But picking a good donor pool can be challenging when there are very many controls.

- Similarly, DID requires $\mathbb{E}[y_{1t}(0)] - \mathbb{E}[y_{\mathcal{N}_0 t}(0)] = \mathbb{E}[y_{1t-1}(0)] - \mathbb{E}[y_{\mathcal{N}_0 t-1}(0)]$, or parallel trends. Parallel trends may not always hold, however, particularly if we think that time effects interact with unit specific effects (i.e., the two-way fixed effect model is invalid).

---

## Potential Solutions

- Of course, economists understand this, and econometricians have crafted methods which attempt to address all of these in some way.

---

## Benefits of mlsynth

- **Forward Difference-in-Differences (FDID)**
  - Better parallel trends
- **$\ell_2$ Relaxer**
  - Handles multicollinearity better than LASSO.
- **Robust PCA SCM**
  - Uses better PCA

---

## Example: FDID in Action

```{python results="markup"}
print("I am Jared")
